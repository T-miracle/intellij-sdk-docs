<!-- Copyright 2000-2024 JetBrains s.r.o. and contributors. Use of this source code is governed by the Apache 2.0 license. -->

# 插件配置文件

<show-structure for="chapter" depth="4"/>

<link-summary>插件配置文件包含有关插件的所有信息，以及所有注册的扩展、操作、监听器等。</link-summary>

<path>plugin.xml</path> 配置文件包含有关插件的所有信息，这些信息显示在[插件设置对话框](https://www.jetbrains.com/help/idea/managing-plugins.html)中，以及所有已注册的扩展、操作、监听器等。  
以下部分详细描述了所有元素。

示例 <path>plugin.xml</path> 文件可以在 [IntelliJ SDK 文档代码示例](https://github.com/JetBrains/intellij-sdk-code-samples) 存储库中找到。

> 译者注：
>
> 具体位置点击 [此处](https://github.com/JetBrains/intellij-sdk-code-samples/blob/main/theme_basics/resources/META-INF/plugin.xml) 查看

## 附加插件配置文件 { id=additional-plugin-configuration-files }

插件可以在主 <path>plugin.xml</path> 旁边包含其他配置文件。
它们具有相同的格式，并且包含在指定 [插件依赖项](plugin_dependencies.md) 的 [`<depends>`](#idea-plugin__depends) 元素的 `config-file` 属性中。
但是，<path>plugin.xml</path> 中所需的一些元素和属性在其他配置文件中会被忽略。
如果要求不同，下面的文档将明确说明。
附加配置文件的一个用例是当插件提供仅在某些 IDE 中可用并且需要 [某些模块](plugin_compatibility.md#modules-specific-to-functionality) 的可选功能时。

## 实用的资源

请确保遵循 [插件概述页面](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html) 的指南，以便在 JetBrains Marketplace 上以最佳方式展示您的插件。  
_Busy Plugin Developers. Episode 2_ 详细讨论了 [优化 JetBrains Marketplace 插件页面的 5 个技巧](https://youtu.be/oB1GA9JeeiY?t=52)。

另请参阅 [](marketing.md) 了解小部件和徽章。

## 配置结构概述 {id=configuration-structure-overview}

> 如果某个元素或属性未在此页面上记录，请将其视为仅供 JetBrains 使用的配置项。  
> 第三方插件不得使用它们。
>
{title="私有配置元素" style="warning"}

以下列表中省略了已弃用的元素。

[//]: # (GENERATED CONTENT START)

[//]: # (This content is generated by generate_descriptor_pages.main.kts script.)
[//]: # (DO NOT EDIT IT MANUALLY)

- [`<idea-plugin>`](#idea-plugin)
  - [`<id>`](#idea-plugin__id)
  - [`<name>`](#idea-plugin__name)
  - [`<version>`](#idea-plugin__version)
  - [`<product-descriptor>`](#idea-plugin__product-descriptor)
  - [`<idea-version>`](#idea-plugin__idea-version)
  - [`<vendor>`](#idea-plugin__vendor)
  - [`<description>`](#idea-plugin__description)
  - [`<change-notes>`](#idea-plugin__change-notes)
  - [`<depends>`](#idea-plugin__depends)
  - [`<incompatible-with>`](#idea-plugin__incompatible-with)
  - [`<extensions>`](#idea-plugin__extensions)
  - [`<extensionPoints>`](#idea-plugin__extensionPoints)
    - [`<extensionPoint>`](#idea-plugin__extensionPoints__extensionPoint)
      - [`<with>`](#idea-plugin__extensionPoints__extensionPoint__with)
  - [`<resource-bundle>`](#idea-plugin__resource-bundle)
  - [`<actions>`](#idea-plugin__actions)
    - [`<action>`](#idea-plugin__actions__action)
      - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
      - [`<keyboard-shortcut>`](#idea-plugin__actions__action__keyboard-shortcut)
      - [`<mouse-shortcut>`](#idea-plugin__actions__action__mouse-shortcut)
      - [`<override-text>`](#idea-plugin__actions__action__override-text)
      - [`<synonym>`](#idea-plugin__actions__action__synonym)
      - [`<abbreviation>`](#idea-plugin__actions__action__abbreviation)
    - [`<group>`](#idea-plugin__actions__group)
      - [`<action>`](#idea-plugin__actions__action)
        - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
        - [`<keyboard-shortcut>`](#idea-plugin__actions__action__keyboard-shortcut)
        - [`<mouse-shortcut>`](#idea-plugin__actions__action__mouse-shortcut)
        - [`<override-text>`](#idea-plugin__actions__action__override-text)
        - [`<synonym>`](#idea-plugin__actions__action__synonym)
        - [`<abbreviation>`](#idea-plugin__actions__action__abbreviation)
      - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
      - [`<override-text>`](#idea-plugin__actions__action__override-text)
      - [`<reference>`](#idea-plugin__actions__group__reference)
        - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
      - [`<separator>`](#idea-plugin__actions__group__separator)
        - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
    - [`<reference>`](#idea-plugin__actions__group__reference)
      - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
  - [`<applicationListeners>`](#idea-plugin__applicationListeners)
    - [`<listener>`](#idea-plugin__applicationListeners__listener)
  - [`<projectListeners>`](#idea-plugin__projectListeners)
    - [`<listener>`](#idea-plugin__applicationListeners__listener)

## `idea-plugin` {id=idea-plugin}

<path>plugin.xml</path> 文件的根元素。

{style="narrow"}
必填
: **是**

属性
:
- `url` _(可选；在[附加配置文件](#additional-plugin-configuration-files)中忽略)_<br/>
  插件主页的链接，显示在 [JetBrains Marketplace](https://plugins.jetbrains.com) 的插件页面上。
- `require-restart` _(可选)_<br/>

  布尔值，确定插件的安装、更新或卸载是否需要重启 IDE（详见 [动态插件](dynamic_plugins.md)）。<br/>
  默认值：`false`。

Children
:
  - [`<actions>`](#idea-plugin__actions)
  - [`<applicationListeners>`](#idea-plugin__applicationListeners)
  - [`<change-notes>`](#idea-plugin__change-notes)
  - [`<depends>`](#idea-plugin__depends)
  - [`<description>`](#idea-plugin__description)
  - [`<extensionPoints>`](#idea-plugin__extensionPoints)
  - [`<extensions>`](#idea-plugin__extensions)
  - [`<id>`](#idea-plugin__id)
  - [`<idea-version>`](#idea-plugin__idea-version)
  - [`<incompatible-with>`](#idea-plugin__incompatible-with)
  - [`<name>`](#idea-plugin__name)
  - [`<product-descriptor>`](#idea-plugin__product-descriptor)
  - [`<projectListeners>`](#idea-plugin__projectListeners)
  - [`<resource-bundle>`](#idea-plugin__resource-bundle)
  - [`<vendor>`](#idea-plugin__vendor)
  - [`<version>`](#idea-plugin__version)
  - [`<application-components>`](#idea-plugin__application-components)  ![Deprecated][deprecated]
  - [`<module-components>`](#idea-plugin__module-components)  ![Deprecated][deprecated]
  - [`<project-components>`](#idea-plugin__project-components)  ![Deprecated][deprecated]

### `id` {id=idea-plugin__id}

插件的唯一标识符。  
它应该类似于 Java 包的完全限定名称，并且不得与现有插件的 ID 冲突。  
ID 是一个技术值，用于在 IDE 和 [JetBrains Marketplace](https://plugins.jetbrains.com) 中标识插件。  
请仅使用字母、数字和 `'.'`/`'-'`/`'_'` 符号，并保持其合理简短。

> 请确保选择一个稳定的 ID，因为在公开发布后无法更改此值。
>
{style="warning"}

{style="narrow"}
必填
: 否；在[附加配置文件](#additional-plugin-configuration-files)中忽略<br/>
**强烈建议在 <path>plugin.xml</path> 文件中设置。**<br/>
如果启用了 Gradle 插件的 `patchPluginXml` 任务（[2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml)，[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml)）并进行了配置，则可以在源 <path>plugin.xml</path> 文件中跳过此元素。

默认值
: [`<name>`](#idea-plugin__name) 元素的值。

示例
:
  ```xml
  <id>com.company.framework</id>
  ```

### `name` {id=idea-plugin__name}

<tldr>

**参考:** [JetBrains Marketplace: 插件名称](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name)

</tldr>

用户可见的插件显示名称（首字母大写）。

{style="narrow"}
必填
: **是**；在[附加配置文件](#additional-plugin-configuration-files)中忽略


示例
:
  ```xml
  <name>My Framework Support</name>
  ```

### `version` {id=idea-plugin__version}

<tldr>

**参考:** [JetBrains Marketplace: 语义化版本](https://plugins.jetbrains.com/docs/marketplace/semver.html)

</tldr>

显示在 <control>插件</control> 设置对话框和 [JetBrains Marketplace](https://plugins.jetbrains.com) 插件页面中的插件版本。  
上传到 JetBrains Marketplace 的插件必须遵循语义化版本控制。

{style="narrow"}
必填
: **是**；在[附加配置文件](#additional-plugin-configuration-files)中忽略<br/>
如果启用了 Gradle 插件的 `patchPluginXml` 任务（[2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml)，[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml)）并进行了配置，则可以在源 <path>plugin.xml</path> 文件中跳过此元素。

示例
:
  ```xml
  <version>1.3.18</version>
  ```

### `product-descriptor` {id=idea-plugin__product-descriptor}

<tldr>

**参考:** [JetBrains Marketplace: 如何为付费插件添加必要参数](https://plugins.jetbrains.com/docs/marketplace/add-required-parameters.html)

</tldr>

[付费](https://plugins.jetbrains.com/build-and-market) 或 [免费增值](https://plugins.jetbrains.com/docs/marketplace/freemium.html) 插件描述符。

{style="narrow"}
必填
: 仅适用于付费或免费增值插件；在[附加配置文件](#additional-plugin-configuration-files)中忽略<br/>
**不要在免费插件中添加 `<product-descriptor>` 元素。**



属性
:
- `code` _(**必填**)_<br/>
  用于 JetBrains 销售系统的插件产品代码。  
  该代码必须事先与 JetBrains 达成一致，并遵循 [要求](https://plugins.jetbrains.com/docs/marketplace/obtain-a-product-code-from-jetbrains.html)。
- `release-date` _(**必填**)_<br/>
  主要版本发布的日期，格式为 `YYYYMMDD`。
- `release-version` _(**必填**)_<br/>
  特殊数字格式的主要版本。
- `optional` _(可选)_<br/>
  布尔值，确定插件是否为 [免费增值](https://plugins.jetbrains.com/docs/marketplace/freemium.html) 插件。<br/>
  默认值：`false`。
- `eap` _(可选)_<br/>

  指定布尔值，确定插件是否为 EAP 版本。<br/>
  默认值：`false`。

### `idea-version` {id=idea-plugin__idea-version}

<tldr>

**参考:** [构建号范围](build_number_ranges.md)

</tldr>

插件兼容的基于 IntelliJ 的 IDE 版本范围。

{style="narrow"}
必填
: **是**；在[附加配置文件](#additional-plugin-configuration-files)中忽略<br/>
如果启用了 Gradle 插件的 `patchPluginXml` 任务（[2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml)，[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml)）并进行了配置，则可以在源 <path>plugin.xml</path> 文件中跳过此元素。



属性
:
- `since-build` _(**必填**)_<br/>
  与插件兼容的最低 IDE 版本。
- `until-build` _(可选)_<br/>

  与插件兼容的最高 IDE 版本。  
  未定义值表示与自 `since-build` 指定的版本以来的所有 IDE 兼容（也包括可能导致不兼容错误的未来版本）。

示例
:
- 兼容特定构建号（2021.3.3）及更高版本：
    ```xml
    <idea-version since-build="213.7172.25"/>
    ```
- 兼容从任何 `213` 分支到任何 `221` 分支的版本：
    ```xml
    <idea-version
        since-build="213" until-build="221.*"/>
    ```

### `vendor`
{#idea-plugin__vendor}

<tldr>

**参考:** [JetBrains Marketplace: 联系方式和资源](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#contacts-and-resources)

</tldr>

在 <control>插件</control> 设置对话框和 [JetBrains Marketplace](https://plugins.jetbrains.com) 插件页面中显示的供应商名称或组织 ID（如果已创建）。

{style="narrow"}
必填
: **是**；在[附加配置文件](#additional-plugin-configuration-files)中忽略

属性
:
- `url` _(可选)_<br/>
  供应商主页的 URL。  
  支持 `https://` 和 `http://` 协议的链接。
- `email` _(可选)_<br/>

  供应商的电子邮件地址。

示例
:
- 提供电子邮件地址的个人供应商：
    ```xml
    <vendor email="joe@example.com">Joe Doe</vendor>
    ```
- 提供网站 URL 和电子邮件地址的组织供应商：
    ```xml
    <vendor
        url="https://mycompany.example.com"
        email="contact@example.com">
      My Company
    </vendor>
    ```

### `description`
{#idea-plugin__description}

<tldr>

**参考:** [JetBrains Marketplace: 插件描述](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description)

</tldr>

在 [JetBrains Marketplace](https://plugins.jetbrains.com) 插件页面和 <control>插件</control> 设置对话框中显示的插件描述。

允许使用简单的 HTML 元素，如文本格式化、段落、列表等，并且必须包裹在 `<![CDATA[` ... `]]>` 部分中。

{style="narrow"}
必填
: **是**；在[附加配置文件](#additional-plugin-configuration-files)中忽略<br/>
如果启用了 Gradle 插件的 `patchPluginXml` 任务（[2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml)，[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml)）并进行了配置，则可以在源 <path>plugin.xml</path> 文件中跳过此元素。


示例
:
  ```xml
  <description><![CDATA[
  提供对 My Framework 的支持。  
  支持包括：
  <ul>
    <li>代码补全</li>
    <li>引用</li>
  </ul>
  更多信息请访问
  <a href="https://example.com">项目网站</a>。
  ]]></description>
  ```

### `change-notes`
{#idea-plugin__change-notes}

<tldr>

**参考:** [JetBrains Marketplace: 变更日志](https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#change-notes)

</tldr>

最新插件版本提供的新功能、错误修复和变更的简短摘要。  
变更日志显示在 [JetBrains Marketplace](https://plugins.jetbrains.com) 插件页面和 <control>插件</control> 设置对话框中。

允许使用简单的 HTML 元素，如文本格式化、段落、列表等，并且必须包裹在 `<![CDATA[` ... `]]>` 部分中。

{style="narrow"}
必填
: 否；在[附加配置文件](#additional-plugin-configuration-files)中忽略<br/>
如果启用了 Gradle 插件的 `patchPluginXml` 任务（[2.x](tools_intellij_platform_gradle_plugin_tasks.md#patchPluginXml)，[1.x](tools_gradle_intellij_plugin.md#tasks-patchpluginxml)）并进行了配置，则可以在源 <path>plugin.xml</path> 文件中跳过此元素。

示例
:
  ```xml
  <change-notes><![CDATA[
  <h2>新功能</h2>
  <ul>
    <li>功能 1</li>
    <li>功能 2</li>
  </ul>
  <h2>错误修复</h2>
  <ul>
    <li>修复问题 1</li>
    <li>修复问题 2</li>
  </ul>
  ]]></change-notes>
  ```

### `depends`
{#idea-plugin__depends}

<tldr>

**参考:** [插件依赖项](plugin_dependencies.md)，[功能特定模块](plugin_compatibility.md#modules-specific-to-functionality)

</tldr>

指定对另一个插件或基于 IntelliJ 平台的产品的模块的依赖。  
单个 [`<idea-plugin>`](#idea-plugin) 元素可以包含多个 `<depends>` 元素。

{style="narrow"}
必填
: 否；大多数情况下需要依赖 [平台](plugin_compatibility.md#modules-available-in-all-products) 模块



属性
:
- `optional` _(可选)_<br/>
  布尔值，定义依赖项是否为加载插件到 IDE 中的可选项。  
  如果当前 IDE 中未安装依赖插件，且 `optional` 为：
  - `true` - 插件将被加载
  - `false`（默认值）- 插件将不会被加载
- `config-file` _(当 `optional` 为 `true` 时必填)_<br/>

  [附加配置文件](#additional-plugin-configuration-files) 的相对路径，仅当依赖插件安装在当前 IDE 中时才会加载。

示例
:
- 必需的插件依赖：
    ```xml
    <depends>com.example.dependencypluginid</depends>
    ```
- 对 IntelliJ IDEA Java 模块的必需依赖：
    ```xml
    <depends>com.intellij.modules.java</depends>
    ```
- 可选的插件依赖：
    ```xml
    <depends optional="true">
      com.example.dependencypluginid
    </depends>
    ```
- 带有附加配置的必需模块依赖：
    ```xml
    <depends
        config-file="myPluginId-withJava.xml">
      com.intellij.modules.java
    </depends>
    ```
- 带有附加配置的可选模块依赖：
    ```xml
    <depends
        optional="true"
        config-file="myPluginId-withKotlin.xml">
      org.jetbrains.kotlin
    </depends>
    ```

### `incompatible-with`
{#idea-plugin__incompatible-with}

<primary-label ref="2020.2"/>

<tldr>

**参考:** [声明与模块的不兼容性](plugin_compatibility.md#declaring-incompatibility-with-module)

</tldr>

声明与提供的模块不兼容。

{style="narrow"}
必填
: 否；在[附加配置文件](#additional-plugin-configuration-files)中忽略

示例
:
  ```xml
  <incompatible-with>
  com.intellij.modules.appcode.ide
</incompatible-with>
  ```

### `extensions`
{#idea-plugin__extensions}

<tldr>

**参考:** [扩展](plugin_extensions.md)

</tldr>

定义插件扩展。

{style="narrow"}
必填
: 否


属性
:
- `defaultExtensionNs` _(可选)_<br/>

  默认扩展命名空间。  
  它允许在完全限定的扩展点名称中跳过公共前缀。  
  通常，当插件实现 IntelliJ 平台扩展时，使用 `com.intellij` 命名空间。

子元素
:
子元素是通过 [`<extensionPoint>`](#idea-plugin__extensionPoints__extensionPoint) 元素定义的扩展点的注册。扩展元素名称遵循由 `name` 或 `qualifiedName` 属性定义的扩展点名称。


示例
:
- 使用默认命名空间的扩展声明：
```xml
<extensions defaultExtensionNs="com.intellij">
  <applicationService
      serviceImplementation="com.example.Service"/>
</extensions>
```
- 使用完全限定扩展名称的扩展声明：
```xml
<extensions>
  <com.example.vcs.myExtension
          implementation="com.example.MyExtension"/>
</extensions>
```

### `extensionPoints`
{#idea-plugin__extensionPoints}

<tldr>

**参考:** [扩展点](plugin_extension_points.md)

</tldr>

插件定义的扩展点。

{style="narrow"}
必填
: 否

子元素
:
- [`<extensionPoint>`](#idea-plugin__extensionPoints__extensionPoint)

#### `extensionPoint`
{#idea-plugin__extensionPoints__extensionPoint}

<tldr>

**参考:** [声明扩展点](plugin_extension_points.md#declaring-extension-points)

</tldr>

插件定义的 [`<extensionPoints>`](#idea-plugin__extensionPoints) 中的单个扩展点条目。  
单个 [`<extensionPoints>`](#idea-plugin__extensionPoints) 元素可以包含多个 `<extensionPoint>` 元素。

{style="narrow"}
必填
: 否


属性
:
- `name` _(`name` 或 `qualifiedName` 是**必填**)_<br/>
  扩展点名称，在插件范围内应唯一，例如 `myExtension`。  
  扩展点的完全限定名称在运行时通过将 `name` 属性的值前缀为插件 [`<id>`](#idea-plugin__id) + `.` 来构建。  
  只能指定 `name` 和 `qualifiedName` 属性中的一个。<br/>
  示例：当 `name` 为 `myExtension` 且插件 ID 为 `com.example.myplugin` 时，扩展点的完全限定名称将为 `com.example.myplugin.myExtension`。
- `qualifiedName` _(`name` 或 `qualifiedName` 是**必填**)_<br/>
  扩展点的完全限定名称。  
  它应在不同插件之间唯一，建议包含插件 ID 以保证唯一性，例如 `com.example.myplugin.myExtension`。  
  只能指定 `name` 和 `qualifiedName` 属性中的一个。
- `interface` _(`interface` 或 `beanClass` 是**必填**)_<br/>
  用于扩展插件功能的接口的完全限定名称。  
  只能指定 `interface` 和 `beanClass` 属性中的一个。  
  有关更多信息，请参阅 [扩展点](plugin_extension_points.md)。
- `beanClass` _(`interface` 或 `beanClass` 是**必填**)_<br/>
  提供插件附加信息的扩展点 bean 类的完全限定名称。  
  只能指定 `interface` 和 `beanClass` 属性中的一个。  
  有关更多信息，请参阅 [扩展点](plugin_extension_points.md)。
- `dynamic` _(可选)_<br/>
  布尔值，定义扩展点是否符合 [动态](plugin_extension_points.md#dynamic-extension-points) 要求，这是 [动态插件](dynamic_plugins.md) 的前提条件。<br/>
  默认值：`false`。
- `area` _(可选)_<br/>

  [扩展](plugin_extensions.md) 实例化的范围。  
  不建议使用非默认值。  
  允许的值：
  - `IDEA_APPLICATION` _(默认)_
  - `IDEA_PROJECT`
  - `IDEA_MODULE` (**已弃用**)

子元素
:
- [`<with>`](#idea-plugin__extensionPoints__extensionPoint__with)

##### `with`
{#idea-plugin__extensionPoints__extensionPoint__with}

指定扩展点标签或属性中提供的类名称所需的父类型。  
单个 [`<extensionPoint>`](#idea-plugin__extensionPoints__extensionPoint) 元素可以包含多个 `<with>` 元素。

{style="narrow"}
必填
: 否


属性
:
- `tag` _(`tag` 或 `attribute` 是**必填**)_<br/>
  持有类完全限定名称的标签名称，其父类型将由 `implements` 属性中提供的类型限制。  
  只能指定 `tag` 和 `attribute` 属性中的一个。
- `attribute` _(`tag` 或 `attribute` 是**必填**)_<br/>
  持有类完全限定名称的属性名称，其父类型将由 `implements` 属性中提供的类型限制。  
  只能指定 `tag` 和 `attribute` 属性中的一个。
- `implements` _(**必填**)_<br/>

  限制由 `tag` 或 `attribute` 指定的位置中提供的类型的父类型的完全限定名称。

示例
:
一个扩展点，限制 `myClass` 属性中提供的类型为 `com.example.ParentType` 的实例，并限制 `someClass` 元素中提供的类型为 `java.lang.Comparable` 的实例：

  ```xml
  <extensionPoint
      name="myExtension"
      beanClass="com.example.MyExtension">
    <with
        attribute="myClass"
        implements="com.example.ParentType"/>
    <with
        tag="someClass"
        implements="java.lang.Comparable"/>
  </extensionPoint>
  ```

使用上述扩展点时，可以按如下方式注册实现：

  ```xml
  <myExtension ...
      myClass="com.example.MyCustomType">
    <someClass>com.example.MyComparable</someClass>
  </myExtension>
  ```

其中：

- `com.example.MyCustomType` 必须是 `com.example.ParentType` 的子类型
- `com.example.MyComparable` 必须是 `java.lang.Comparable` 的子类型

### `resource-bundle`
{#idea-plugin__resource-bundle}

用于扩展声明中的消息键属性和 [操作及组本地化](basic_action_system.md#localizing-actions-and-groups) 的资源包。  
单个 [`<idea-plugin>`](#idea-plugin) 元素可以包含多个 `<resource-bundle>` 元素。

{style="narrow"}
必填
: 否

示例
:
要加载 <path>messages/Bundle.properties</path> 包的内容，声明如下：
    ```xml
    <resource-bundle>messages.Bundle</resource-bundle>
    ```

### `actions`
{#idea-plugin__actions}

<tldr>

**参考:** [操作](basic_action_system.md)

</tldr>

定义插件操作。

{style="narrow"}
必填
: 否

属性
:
- `resource-bundle` _(可选；自 2020.1 起可用)_<br/>

  定义专用的操作资源包。  
  有关更多详细信息，请参阅 [本地化操作和组](basic_action_system.md#localizing-actions-and-groups)。

子元素
:
  - [`<action>`](#idea-plugin__actions__action)
  - [`<group>`](#idea-plugin__actions__group)
  - [`<reference>`](#idea-plugin__actions__group__reference)

示例
:
  ```xml
  <actions resource-bundle="messages.ActionsBundle">
    <!--
  此处定义的操作/组将使用 ActionsBundle.properties 包中的键。
    -->
  </actions>
  ```

#### `action`
{#idea-plugin__actions__action}

<tldr>

**参考:** [在 plugin.xml 中注册操作](basic_action_system.md#registering-actions-in-pluginxml)

</tldr>

插件实现的 [`<actions>`](#idea-plugin__actions) 中的单个操作条目。  
单个 `<actions>` 元素可以包含多个 `<action>` 元素。

{style="narrow"}
必填
: 否


属性
:
- `id` _(**必填**)_<br/>
  唯一的操作标识符。  
  操作标识符在不同插件之间必须唯一。  
  因此，建议在其前面加上插件 [`<id>`](#idea-plugin__id) 的值。
- `class` _(**必填**)_<br/>
  操作实现类的完全限定名称。
- `text` _(如果操作未[本地化](basic_action_system.md#localizing-actions-and-groups)，则**必填**)_<br/>
  为操作显示的默认长文本（工具栏按钮的工具提示或菜单项的文本）。
- `description` _(可选)_<br/>
  当操作获得焦点时显示在状态栏中的文本。
- `icon` _(可选)_<br/>
  显示在工具栏按钮上或操作菜单项旁边的图标。  
  有关定义和使用图标的更多信息，请参阅 [使用图标](icons.md)。
- `use-shortcut-of` _(可选)_<br/>

  此操作将使用的键盘快捷键的操作 ID。

子元素
:
  - [`<abbreviation>`](#idea-plugin__actions__action__abbreviation)
  - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
  - [`<keyboard-shortcut>`](#idea-plugin__actions__action__keyboard-shortcut)
  - [`<mouse-shortcut>`](#idea-plugin__actions__action__mouse-shortcut)
  - [`<override-text>`](#idea-plugin__actions__action__override-text)
  - [`<synonym>`](#idea-plugin__actions__action__synonym)

示例
:
- 声明显式 `text` 的操作：
    ```xml
    <action
        id="com.example.myframeworksupport.MyAction"
        class="com.example.impl.MyAction"
        text="Do Action"
        description="Do something with the code"
        icon="AllIcons.Actions.GC">
      <!-- 操作子元素 -->
    </action>
    ```
- 没有 `text` 属性的操作必须使用由 [`<resource-bundle>`](#idea-plugin__resource-bundle) 元素或 [`<actions>`](#idea-plugin__actions) 元素的 `resource-bundle` 属性声明的资源包中的文本：
    ```xml
    <action
        id="com.example.myframeworksupport.MyAction"
        class="com.example.impl.MyAction"
        icon="AllIcons.Actions.GC"/>
    ```

##### `add-to-group`
{#idea-plugin__actions__action__add-to-group}

指定操作应添加到现有的 [`<group>`](#idea-plugin__actions__group) 中。  
单个操作可以添加到多个组中。

{style="narrow"}
必填
: 否


属性
:
- `group-id` _(**必填**)_<br/>
  指定操作要添加到的 [`<group>`](#idea-plugin__actions__group) 的 ID。  
  该组必须是 [`DefaultActionGroup`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java) 类的实现。
- `anchor` _(可选)_<br/>
  指定操作相对于其他操作的位置。  
  允许的值：
  - `first` - 操作放置在组的第一个位置
  - `last` _(默认)_ - 操作放置在组的最后一个位置
  - `before` - 操作放置在 `relative-to-action` 属性指定的操作之前
  - `after` - 操作放置在 `relative-to-action` 属性指定的操作之后
- `relative-to-action` _(如果 `anchor` 为 `before`/`after`，则**必填**)_<br/>

  当前操作插入之前或之后的操作。

示例
:
  ```xml
    <add-to-group
        group-id="ToolsMenu"
        anchor="after"
        relative-to-action="GenerateJavadoc"/>
  ```

##### `keyboard-shortcut`
{#idea-plugin__actions__action__keyboard-shortcut}

指定操作的键盘快捷键。  
单个操作可以有多个键盘快捷键。

{style="narrow"}
必填
: 否


属性
:
- `keymap` _(**必填**)_<br/>
  指定操作快捷键生效的键映射。  
  标准键映射的 ID 在 [KeymapManager](%gh-ic%/platform/platform-api/src/com/intellij/openapi/keymap/KeymapManager.java) 类中定义为常量。
- `first-keystroke` _(**必填**)_<br/>
  指定操作快捷键的第一个按键。  
  按键按照常规的 Swing 规则指定。
- `second-keystroke` _(可选)_<br/>
  指定操作快捷键的第二个按键。
- `remove` _(可选)_<br/>
  从指定操作中移除快捷键。
- `replace-all` _(可选)_<br/>

  在添加指定快捷键之前，从指定操作中移除所有键盘和鼠标快捷键。

示例
:
- 为所有键映射添加第一个和第二个按键：
    ```xml
    <keyboard-shortcut
        keymap="$default"
        first-keystroke="control alt G"
        second-keystroke="C"/>
    ```
- 从 _Mac OS X_ 键映射中移除给定的快捷键：
    ```xml
    <keyboard-shortcut
        keymap="Mac OS X"
        first-keystroke="control alt G"
        second-keystroke="C"
        remove="true"/>
    ```
- 移除所有现有的键盘和鼠标快捷键，并仅为 _Mac OS X 10.5+_ 键映射注册一个：
    ```xml
    <keyboard-shortcut
        keymap="Mac OS X 10.5+"
        first-keystroke="control alt G"
        second-keystroke="C"
        replace-all="true"/>
    ```

##### `mouse-shortcut`
{#idea-plugin__actions__action__mouse-shortcut}

指定操作的鼠标快捷键。  
单个操作可以有多个鼠标快捷键。

{style="narrow"}
必填
: 否


属性
:
- `keymap` _(**必填**)_<br/>
  指定操作快捷键生效的键映射。  
  标准键映射的 ID 在 [KeymapManager](%gh-ic%/platform/platform-api/src/com/intellij/openapi/keymap/KeymapManager.java) 类中定义为常量。
- `keystroke` _(**必填**)_<br/>
  指定操作的点击和修饰键。  
  它被定义为由空格分隔的单词序列：
  - 修饰键：`shift`、`control`、`meta`、`alt`、`altGraph`
  - 鼠标按钮：`button1`、`button2`、`button3`
  - 按钮双击：`doubleClick`
- `remove` _(可选)_<br/>
  从指定操作中移除快捷键。
- `replace-all` _(可选)_<br/>

  在添加指定快捷键之前，从指定操作中移除所有键盘和鼠标快捷键。

示例
:
- 为所有键映射添加快捷键：
    ```xml
    <mouse-shortcut
        keymap="$default"
        keystroke="control button3 doubleClick"/>
    ```
- 从 _Mac OS X_ 键映射中移除给定的快捷键：
    ```xml
    <mouse-shortcut
        keymap="Mac OS X"
        keystroke="control button3 doubleClick"
        remove="true"/>
    ```
- 移除所有现有的键盘和鼠标快捷键，并仅为 _Mac OS X 10.5+_ 键映射注册一个：
    ```xml
    <mouse-shortcut
        keymap="Mac OS X 10.5+"
        keystroke="control button3 doubleClick"
        replace-all="true"/>
    ```

##### `override-text`
{#idea-plugin__actions__action__override-text}

<primary-label ref="2020.1"/>

根据上下文定义替代的菜单操作或组文本：菜单位置、工具栏等。

{style="narrow"}
支持
:
2020.1+ 用于操作<br/>
2020.3+ 用于组

{style="narrow"}
必填
: 否


属性
:
- `place` _(**必填**)_<br/>
  声明应在何处使用替代文本。
- `text` _(`text` 或 `use-text-of-place` 是**必填**)_<br/>
  定义要为操作显示的文本。
- `use-text-of-place` _(`text` 或 `use-text-of-place` 是**必填**)_<br/>

  定义应为此操作显示其文本的位置。

示例
:
- 显式覆盖的文本：
    ```xml
    <!--
    默认操作文本：
    "Garbage Collector: Collect _Garbage"
    -->
    <action
        class="com.example.CollectGarbage"
        text="Garbage Collector: Collect _Garbage"
        ...>
      <!--
      在主菜单中任何位置显示的替代文本：
      "Collect _Garbage"
      -->
      <override-text
          place="MainMenu"
          text="Collect _Garbage"/>
    </action>
    ```
- 从 `MainMenu` 位置重用的覆盖文本：
    ```xml
    <override-text
        place="EditorPopup"
        use-text-of-place="MainMenu"/>
    ```

##### `synonym`
{#idea-plugin__actions__action__synonym}

<primary-label ref="2020.3"/>

定义在 <ui-path>帮助 | 查找操作...</ui-path> 或 <ui-path>导航 | 随处搜索</ui-path> 弹出窗口中搜索操作的替代文本。  
单个操作可以有多个同义词。

{style="narrow"}
必填
: 否

属性
:
- `key` _(`key` 或 `text` 是**必填**)_<br/>
  [消息包](basic_action_system.md#localizing-actions-and-groups) 中提供的同义词文本的键。
- `text` _(`key` 或 `text` 是**必填**)_<br/>

  同义词文本。

示例
:
  ```xml
  <!-- 默认操作文本：Delete Element -->
  <synonym key="my.action.text.remove.element"/>
  <synonym text="Remove Element"/>
  ```

##### `abbreviation`
{#idea-plugin__actions__action__abbreviation}

定义在 <ui-path>帮助 | 查找操作...</ui-path> 或 <ui-path>导航 | 随处搜索</ui-path> 弹出窗口中搜索操作的缩写。  
单个操作可以有多个缩写。

{style="narrow"}
必填
: 否


属性
:
- `value` _(**必填**)_<br/>

  缩写值。

示例
:
  ```xml
  <!-- 默认操作文本：UI Inspector -->
  <abbreviation value="uii"/>
  ```

#### `group`
{#idea-plugin__actions__group}

<tldr>

**参考:** [分组操作](basic_action_system.md#grouping-actions)

</tldr>

定义操作组。  
在组内定义的 [`<action>`](#idea-plugin__actions__action)、`<group>` 和 [`<separator>`](#idea-plugin__actions__group__separator) 元素会自动包含在其中。  
`<group>` 元素可以嵌套。

{style="narrow"}
必填
: 否


属性
:
- `id` _(**必填**)_<br/>
  唯一的组标识符。  
  组标识符在不同插件之间必须唯一。  
  因此，建议在其前面加上插件 [`<id>`](#idea-plugin__id) 的值。
- `class` _(可选)_<br/>
  组实现类的完全限定名称。  
  如果未指定，则使用 [`DefaultActionGroup`](%gh-ic%/platform/platform-api/src/com/intellij/openapi/actionSystem/DefaultActionGroup.java)。
- `text` _(如果 `popup` 为 `true` 且组未[本地化](basic_action_system.md#localizing-actions-and-groups)，则**必填**)_<br/>
  为组显示的默认长文本（显示子菜单的菜单项的文本）。
- `description` _(可选)_<br/>
  当组获得焦点时显示在状态栏中的文本。
- `icon` _(可选)_<br/>
  显示在组菜单项旁边的图标。  
  有关定义和使用图标的更多信息，请参阅 [使用图标](icons.md)。
- `popup` _(可选)_<br/>
  布尔标志，定义组项是否显示在子菜单弹出窗口中。
  - `true` - 组操作放置在子菜单中
  - `false` _(默认)_ - 操作显示为同一菜单中的部分，由分隔符分隔
- `compact` _(可选)_<br/>
  布尔标志，定义此组中禁用的操作是否隐藏。  
  如果值为：
  - `true` - 禁用的操作被隐藏
  - `false` _(默认)_ - 禁用的操作可见
- `use-shortcut-of` _(可选)_<br/>
  此组将使用的键盘快捷键的操作 ID。
- `searchable` _(可选；自 2020.3 起可用)_<br/>

  布尔标志，定义组是否显示在 <ui-path>帮助&nbsp;|&nbsp;查找操作...</ui-path> 或 <ui-path>导航 | 随处搜索</ui-path> 弹出窗口中。<br/>
  默认值：`true`。

子元素
:
  - [`<action>`](#idea-plugin__actions__action)
  - [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)
  - [`<group>`](#idea-plugin__actions__group)
  - [`<override-text>`](#idea-plugin__actions__action__override-text)
  - [`<reference>`](#idea-plugin__actions__group__reference)
  - [`<separator>`](#idea-plugin__actions__group__separator)

示例
:
- 声明显式 `text` 的组：
    ```xml
    <group
        id="com.example.myframeworksupport.MyGroup"
        popup="true"
        text="My Tools">
      <!-- 组子元素 -->
    </group>
    ```
- 没有 `text` 属性的弹出组必须使用由 [`<resource-bundle>`](#idea-plugin__resource-bundle) 元素或 [`<actions>`](#idea-plugin__actions) 元素的 `resource-bundle` 属性声明的资源包中的文本：
    ```xml
    <group
        id="com.example.myframeworksupport.MyGroup"
        popup="true"/>
    ```
- 具有自定义实现和图标的组：
    ```xml
    <group
        id="com.example.myframeworksupport.MyGroup"
        class="com.example.impl.MyGroup"
        icon="AllIcons.Actions.GC"/>
    ```

##### `reference`
{#idea-plugin__actions__group__reference}

允许将现有操作添加到组中。  
该元素可以直接在 [`<actions>`](#idea-plugin__actions) 元素下使用，也可以在 [`<group>`](#idea-plugin__actions__group) 元素中使用。

{style="narrow"}
必填
: 否


属性
:
- `ref` _(**必填**)_<br/>
  要添加到组中的操作的 ID。
- `id` _(可选)_<br/>
  **_已弃用_**: 使用 `ref` 代替。

  要添加到组中的操作的 ID。

子元素
:
- [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)

示例
:
- 组中的操作引用：
    ```xml
    <group ...>
      <reference ref="EditorCopy"/>
    </group>
    ```
- 直接在 [`<actions>`](#idea-plugin__actions) 元素中注册的操作引用：
    ```xml
    <actions>
      <reference ref="com.example.MyAction">
        <add-to-group group-id="ToolsMenu"/>
      </reference>
    </group>
    ```

##### `separator`
{#idea-plugin__actions__group__separator}

定义组中操作之间的分隔符。  
该元素可以直接在 [`<actions>`](#idea-plugin__actions) 元素下使用，并使用子元素
[`<add-to-group>`](#idea-plugin__actions__action__add-to-group) 定义目标组，也可以在
[`<group>`](#idea-plugin__actions__group) 元素中使用。

{style="narrow"}
必填
: 否


属性
:
- `text` _(可选)_<br/>
  分隔符上显示的文本。  
  分隔符文本仅在特定上下文中显示，例如弹出菜单、工具栏等。
- `key` _(可选)_<br/>

  分隔符文本的 [消息键](https://plugins.jetbrains.com/docs/intellij/basic-action-system.html#localizing-actions-and-groups)。  
  应通过 [`<actions>`](#idea-plugin__actions) 元素的 `resource-bundle` 属性注册要使用的消息包。  
  如果指定了 `text` 属性，则忽略此属性。

子元素
:
- [`<add-to-group>`](#idea-plugin__actions__action__add-to-group)

示例
:
- 分隔组中的两个操作：
    ```xml
    <group ...>
      <action .../>
      <separator/>
      <action .../>
    </group>
    ```
- 直接在 [`<actions>`](#idea-plugin__actions) 元素中注册的分隔符：
    ```xml
    <actions>
      <separator>
        <add-to-group
            group-id="com.example.MyGroup"
            anchor="first"/>
      </separator>
    </group>
    ```
- 带有定义文本的分隔符：
    ```xml
    <separator text="Group By"/>
    ```
- 带有由消息键定义的文本的分隔符：
    ```xml
    <separator key="message.key"/>
    ```

### `applicationListeners`
{#idea-plugin__applicationListeners}

<primary-label ref="2019.3"/>

<tldr>

**参考:** [定义应用程序级监听器](plugin_listeners.md#defining-application-level-listeners)

</tldr>

定义应用程序级监听器。

{style="narrow"}
必填
: 否

子元素
:
- [`<listener>`](#idea-plugin__applicationListeners__listener)

#### `listener`
{#idea-plugin__applicationListeners__listener}

<primary-label ref="2019.3"/>

<tldr>

**参考:** [监听器](plugin_listeners.md)

</tldr>

定义单个应用程序或项目级监听器。  
单个 [`<applicationListeners>`](#idea-plugin__applicationListeners) 或
[`<projectListeners>`](#idea-plugin__projectListeners) 可以包含多个 `<listener>` 元素。

{style="narrow"}
必填
: 否


属性
:
- `topic` _(**必填**)_<br/>
  与接收事件类型对应的监听器接口的完全限定名称。
- `class` _(**必填**)_<br/>
  实现监听器接口的类的完全限定名称，该类接收并处理事件。
- `os` _(可选；自 2020.1 起可用)_<br/>
  将监听器实例化限制为特定操作系统。  
  允许的值：
  - `freebsd`
  - `mac`
  - `linux`
  - `unix`
  - `windows`
- `activeInTestMode` _(可选)_<br/>
  布尔标志，定义是否应在测试模式下实例化监听器。<br/>
  默认值：`true`。
- `activeInHeadlessMode` _(可选)_<br/>

  布尔标志，定义是否应在无头模式下实例化监听器。<br/>
  默认值：`true`。

示例
:
  ```xml
  <listener
        topic="com.intellij.ide.AppLifecycleListener"
        class="com.example.MyListener"
        os="mac"
        activeInTestMode="false"/>
  ```

### `projectListeners`
{#idea-plugin__projectListeners}

<primary-label ref="2019.3"/>

<tldr>

**参考:** [定义项目级监听器](plugin_listeners.md#defining-project-level-listeners)

</tldr>

定义项目级监听器。

{style="narrow"}
必填
: 否

子元素
:
- [`<listener>`](#idea-plugin__applicationListeners__listener)

### `application-components`
{#idea-plugin__application-components collapsible="true" initial-collapse-state="collapsed"}

<primary-label ref="Deprecated"/>

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

定义应用程序 [组件](plugin_components.md) 列表。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: 否

子元素
:
- [`<component>`](#idea-plugin__application-components__component)  ![已弃用][deprecated]

#### `component`
{#idea-plugin__application-components__component}

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

定义单个应用程序、项目或模块 [组件](plugin_components.md)。  
单个 [`<application-components>`](#idea-plugin__application-components)、[`<project-components>`](#idea-plugin__project-components) 或 [`<module-components>`](#idea-plugin__module-components) 元素可以包含多个 `<component>` 元素。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: 否

子元素
:
- [`<headless-implementation-class>`](#idea-plugin__application-components__component__headless-implementation-class)  ![已弃用][deprecated]
- [`<implementation-class>`](#idea-plugin__application-components__component__implementation-class)  ![已弃用][deprecated]
- [`<interface-class>`](#idea-plugin__application-components__component__interface-class)  ![已弃用][deprecated]
- [`<loadForDefaultProject>`](#idea-plugin__application-components__component__loadForDefaultProject)  ![已弃用][deprecated]
- [`<option>`](#idea-plugin__application-components__component__option)  ![已弃用][deprecated]

##### `implementation-class`
{#idea-plugin__application-components__component__implementation-class}

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

组件实现类的完全限定名称。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: **是**

##### `interface-class`
{#idea-plugin__application-components__component__interface-class}

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

组件接口类的完全限定名称。如果未指定，则接口将与 [`<implementation-class>`](#idea-plugin__application-components__component__interface-class) 元素定义的相同。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: 否

##### `headless-implementation-class`
{#idea-plugin__application-components__component__headless-implementation-class}

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

当 IDE 在无头模式下运行时使用的组件实现类的完全限定名称。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: 否

##### `option`
{#idea-plugin__application-components__component__option}

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

允许提供额外的组件选项。  
单个 [`<component>`](#idea-plugin__application-components__component) 元素可以包含多个 `<option>` 元素。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: 否


属性
:
- `name` _(**必填**)_<br/>
  选项名称。
- `value` _(**必填**)_<br/>

  选项值。

##### `loadForDefaultProject`
{#idea-plugin__application-components__component__loadForDefaultProject}

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

如果存在，则组件也会为默认项目实例化。仅在
[`<project-components>`](#idea-plugin__project-components) 元素中使用时生效。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: 否

### `project-components`
{#idea-plugin__project-components collapsible="true" initial-collapse-state="collapsed"}

<primary-label ref="Deprecated"/>

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

定义项目 [组件](plugin_components.md) 列表。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: 否

子元素
:
- [`<component>`](#idea-plugin__application-components__component)  ![已弃用][deprecated]

### `module-components`
{#idea-plugin__module-components collapsible="true" initial-collapse-state="collapsed"}

<primary-label ref="Deprecated"/>

> 不要在新插件中使用它。  
> 有关迁移指南，请参阅 [组件](plugin_components.md)。
>
{style="warning"}

定义模块 [组件](plugin_components.md) 列表。

{style="narrow"}
已弃用
:
自 2020.1 起

{style="narrow"}
必填
: 否

子元素
:
- [`<component>`](#idea-plugin__application-components__component)  ![已弃用][deprecated]

[//]: # (GENERATED CONTENT END)

[deprecated]: https://img.shields.io/badge/-已弃用-7f7f7f?style=flat-square
